<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>LITM: project/includes/switch.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>project/includes/switch.h File Reference</h1><code>#include &lt;pthread.h&gt;</code><br>

<p>
<div class="dynheader">
Include dependency graph for switch.h:</div>
<div class="dynsection">
<p><center><img src="switch_8h__incl.png" border="0" usemap="#project/includes/switch.h_map" alt=""></center>
</div>

<p>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<p><center><img src="switch_8h__dep__incl.png" border="0" usemap="#project/includes/switch.hdep_map" alt=""></center>
<map name="project/includes/switch.hdep_map">
<area shape="rect" href="switch_8c.html" title="project/src/switch.c" alt="" coords="20,80,153,107"></map>
</div>

<p>
<a href="switch_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="switch_8h.html#cf83bfcffad6990c781b1a668ec8209e">switch_init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="switch_8h.html#e3d353fd292b45761954aa21d793017d">switch_thread_function</a> (void *params)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="litm_8h.html#a1c70492a41df506aa1156ea7d36c4de">litm_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="switch_8h.html#c5408c5b37244e5d0fe17f55f1c3f89e">switch_add_subscriber</a> (<a class="el" href="struct__litm__connection.html">litm_connection</a> *conn, <a class="el" href="litm_8h.html#e7fcc1b5cd037f318d4fe40a2f9d30d3">litm_bus</a> bus_id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="litm_8h.html#a1c70492a41df506aa1156ea7d36c4de">litm_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="switch_8h.html#a12d12ec55e370e7b2d960a67ab19078">switch_remove_subscriber</a> (<a class="el" href="struct__litm__connection.html">litm_connection</a> *conn, <a class="el" href="litm_8h.html#e7fcc1b5cd037f318d4fe40a2f9d30d3">litm_bus</a> bus_id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="litm_8h.html#a1c70492a41df506aa1156ea7d36c4de">litm_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="switch_8h.html#53fa28981b2f79292ea1d0c2d5c50aec">switch_send</a> (<a class="el" href="struct__litm__connection.html">litm_connection</a> *conn, <a class="el" href="litm_8h.html#e7fcc1b5cd037f318d4fe40a2f9d30d3">litm_bus</a> bus_id, void *msg, void(*cleaner)(void *msg), int type)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="litm_8h.html#a1c70492a41df506aa1156ea7d36c4de">litm_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="switch_8h.html#2bab91639e612d51d0d7d8a3a64d0ace">switch_release</a> (<a class="el" href="struct__litm__connection.html">litm_connection</a> *conn, <a class="el" href="struct__litm__envelope.html">litm_envelope</a> *envlp)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="switch_8h.html#21156cec60e58e66f5d409c0cfbcfb12">__switch_wait_shutdown</a> (void)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2009-04-25 </dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Jean-Lou Dupont </dd></dl>

<p>Definition in file <a class="el" href="switch_8h-source.html">switch.h</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="21156cec60e58e66f5d409c0cfbcfb12"></a><!-- doxytag: member="switch.h::__switch_wait_shutdown" ref="21156cec60e58e66f5d409c0cfbcfb12" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __switch_wait_shutdown           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wait for shutdown<p>
Once a litm_send_shutdowm is used, this function should be called to neatly shutdown the process. 
<p>Definition at line <a class="el" href="switch_8c-source.html#l00103">103</a> of file <a class="el" href="switch_8c-source.html">switch.c</a>.</p>

<p>References <a class="el" href="switch_8c-source.html#l00038">_switchThread</a>.</p>

<p>Referenced by <a class="el" href="litm_8c-source.html#l00287">litm_wait_shutdown()</a>.</p>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="switch_8h_21156cec60e58e66f5d409c0cfbcfb12_icgraph.png" border="0" usemap="#switch_8h_21156cec60e58e66f5d409c0cfbcfb12_icgraph_map" alt=""></center>
<map name="switch_8h_21156cec60e58e66f5d409c0cfbcfb12_icgraph_map">
<area shape="rect" href="litm_8h.html#4af596df43cd495373587efed2dbb9ce" title="litm_wait_shutdown" alt="" coords="220,5,353,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="c5408c5b37244e5d0fe17f55f1c3f89e"></a><!-- doxytag: member="switch.h::switch_add_subscriber" ref="c5408c5b37244e5d0fe17f55f1c3f89e" args="(litm_connection *conn, litm_bus bus_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="litm_8h.html#a1c70492a41df506aa1156ea7d36c4de">litm_code</a> switch_add_subscriber           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__litm__connection.html">litm_connection</a> *&nbsp;</td>
          <td class="paramname"> <em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="litm_8h.html#e7fcc1b5cd037f318d4fe40a2f9d30d3">litm_bus</a>&nbsp;</td>
          <td class="paramname"> <em>bus_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="switch_8c-source.html#l00473">473</a> of file <a class="el" href="switch_8c-source.html">switch.c</a>.</p>

<p>References <a class="el" href="connection_8c-source.html#l00246">_litm_connections_trylock()</a>, <a class="el" href="connection_8c-source.html#l00253">_litm_connections_unlock()</a>, <a class="el" href="switch_8c-source.html#l00043">_subscribers_mutex</a>, <a class="el" href="logger_8h-source.html#l00019">DEBUG_LOG</a>, <a class="el" href="litm_8h-source.html#l00227">LITM_BUSSES_MAX</a>, <a class="el" href="litm_8h-source.html#l00332">LITM_CODE_BUSY</a>, <a class="el" href="litm_8h-source.html#l00335">LITM_CODE_ERROR_BAD_CONNECTION</a>, <a class="el" href="litm_8h-source.html#l00345">LITM_CODE_ERROR_BUS_FULL</a>, <a class="el" href="litm_8h-source.html#l00337">LITM_CODE_ERROR_INVALID_BUS</a>, <a class="el" href="litm_8h-source.html#l00330">LITM_CODE_OK</a>, and <a class="el" href="litm_8h-source.html#l00226">LITM_CONNECTION_MAX</a>.</p>

<p>Referenced by <a class="el" href="litm_8c-source.html#l00082">litm_subscribe()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="switch_8h_c5408c5b37244e5d0fe17f55f1c3f89e_cgraph.png" border="0" usemap="#switch_8h_c5408c5b37244e5d0fe17f55f1c3f89e_cgraph_map" alt=""></center>
<map name="switch_8h_c5408c5b37244e5d0fe17f55f1c3f89e_cgraph_map">
<area shape="rect" href="connection_8c.html#6b2986abb5453019ea29678d1d75383f" title="_litm_connections_trylock" alt="" coords="209,5,380,32"><area shape="rect" href="connection_8c.html#c75b4b0413d3523574bda13549715447" title="_litm_connections_unlock" alt="" coords="209,56,380,83"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="switch_8h_c5408c5b37244e5d0fe17f55f1c3f89e_icgraph.png" border="0" usemap="#switch_8h_c5408c5b37244e5d0fe17f55f1c3f89e_icgraph_map" alt=""></center>
<map name="switch_8h_c5408c5b37244e5d0fe17f55f1c3f89e_icgraph_map">
<area shape="rect" href="litm_8h.html#1c8191e4aca778b346954933c7bdf3ff" title="litm_subscribe" alt="" coords="209,5,313,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="cf83bfcffad6990c781b1a668ec8209e"></a><!-- doxytag: member="switch.h::switch_init" ref="cf83bfcffad6990c781b1a668ec8209e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int switch_init           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="switch_8c-source.html#l00072">72</a> of file <a class="el" href="switch_8c-source.html">switch.c</a>.</p>

<p>References <a class="el" href="switch_8c-source.html#l00088">__switch_init_tables()</a>, <a class="el" href="switch_8c-source.html#l00115">__switch_thread_function()</a>, <a class="el" href="switch_8c-source.html#l00038">_switchThread</a>, <a class="el" href="switch_8c-source.html#l00039">_switchThread_status</a>, <a class="el" href="logger_8h-source.html#l00019">DEBUG_LOG</a>, and <a class="el" href="queue_8c-source.html#l00035">queue_create()</a>.</p>

<p>Referenced by <a class="el" href="litm_8c-source.html#l00058">litm_connect_ex()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="switch_8h_cf83bfcffad6990c781b1a668ec8209e_cgraph.png" border="0" usemap="#switch_8h_cf83bfcffad6990c781b1a668ec8209e_cgraph_map" alt=""></center>
<map name="switch_8h_cf83bfcffad6990c781b1a668ec8209e_cgraph_map">
<area shape="rect" href="switch_8c.html#e4d3d02052899f64d09070f18f75c29a" title="__switch_init_tables" alt="" coords="151,159,289,185"><area shape="rect" href="switch_8c.html#99ec0a50e5e594cb656f9ea1f7d39554" title="__switch_thread_function" alt="" coords="136,209,304,236"><area shape="rect" href="queue_8c.html#fb5475fae1028dd41cf622ef2dc84036" title="queue_create" alt="" coords="171,260,269,287"><area shape="rect" href="switch_8c.html#149e07f06e61c0daee8f4cf38200dff2" title="__switch_finalize" alt="" coords="647,20,767,47"><area shape="rect" href="switch_8c.html#4d51cfe83ccbbb9248bbee852a1a3a65" title="__switch_get_next_subscriber" alt="" coords="353,260,548,287"><area shape="rect" href="switch_8c.html#195303a03d0b0c2a3f44951a38b2b0f6" title="__switch_handle_pending" alt="" coords="367,108,535,135"><area shape="rect" href="switch_8c.html#a915fa62ee3a445f9acac19e744005e3" title="__switch_try_sending_or_requeue" alt="" coords="599,108,815,135"><area shape="rect" href="queue_8c.html#e8939dc8316290db7846b56d38c7ff90" title="queue_put" alt="" coords="935,184,1015,211"><area shape="rect" href="litm_8c.html#76f700b9bb8531fd8baf8931e67c4604" title="litm_translate_code" alt="" coords="640,159,773,185"><area shape="rect" href="connection_8c.html#e5df9d4238194cfd02e195a5210602db" title="_litm_connection_signal_all" alt="" coords="361,311,540,337"><area shape="rect" href="queue_8c.html#819eed56d043a96499116f087d928057" title="queue_get_nb" alt="" coords="400,361,501,388"><area shape="rect" href="queue_8c.html#506b0fed202c45ae1d42b1b9d5cd6b30" title="queue_wait" alt="" coords="408,412,493,439"><area shape="rect" href="pool_8c.html#1266647a6ed7c20e9c5d08f4bef09dd3" title="__litm_pool_recycle" alt="" coords="907,20,1043,47"><area shape="rect" href="pool_8c.html#2f844d6f6d2a471a5a93c3c49c28eef2" title="__litm_pool_destroy" alt="" coords="1139,20,1275,47"><area shape="rect" href="switch_8c.html#789e706afab00720920bef8347ac87af" title="__switch_find_match" alt="" coords="635,260,779,287"><area shape="rect" href="switch_8c.html#1025953257d7d23c8473d945dbf0c9db" title="__switch_try_sending_to_recipient" alt="" coords="865,108,1084,135"><area shape="rect" href="queue_8c.html#6771a5883953007fe2dc632d7c56cc98" title="queue_put_head_wait" alt="" coords="1133,83,1280,109"><area shape="rect" href="queue_8c.html#ad63e2d2e97a079465ca5651b5b7c36e" title="queue_put_nb" alt="" coords="1156,133,1257,160"><area shape="rect" href="queue_8c.html#145cb346a7b7660c1fdf011298d6ff5d" title="queue_put_head_safe" alt="" coords="1329,83,1476,109"><area shape="rect" href="queue_8c.html#24e3c9aaef201f1f66bcd8591b1e4c15" title="queue_put_safe" alt="" coords="1347,159,1459,185"><area shape="rect" href="queue_8c.html#a1c32f105f2a17f2255cbe6dfaf66f78" title="queue_signal" alt="" coords="659,311,755,337"><area shape="rect" href="queue_8c.html#223e84e07701aa14c2103fa27d08a101" title="__queue_get_safe" alt="" coords="643,361,771,388"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="switch_8h_cf83bfcffad6990c781b1a668ec8209e_icgraph.png" border="0" usemap="#switch_8h_cf83bfcffad6990c781b1a668ec8209e_icgraph_map" alt=""></center>
<map name="switch_8h_cf83bfcffad6990c781b1a668ec8209e_icgraph_map">
<area shape="rect" href="litm_8h.html#7866d99d291588a5279844f2883fd3fa" title="litm_connect_ex" alt="" coords="137,5,252,32"><area shape="rect" href="litm_8h.html#bc852d2eb14353e36adf21c33eab03a3" title="litm_connect" alt="" coords="301,5,397,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="2bab91639e612d51d0d7d8a3a64d0ace"></a><!-- doxytag: member="switch.h::switch_release" ref="2bab91639e612d51d0d7d8a3a64d0ace" args="(litm_connection *conn, litm_envelope *envlp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="litm_8h.html#a1c70492a41df506aa1156ea7d36c4de">litm_code</a> switch_release           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__litm__connection.html">litm_connection</a> *&nbsp;</td>
          <td class="paramname"> <em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__litm__envelope.html">litm_envelope</a> *&nbsp;</td>
          <td class="paramname"> <em>envlp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A client has finished processing a message: send it through through the ``input_queue`` and if all intended recipients have processed it already, it will be finalized. 
<p>Definition at line <a class="el" href="switch_8c-source.html#l00335">335</a> of file <a class="el" href="switch_8c-source.html">switch.c</a>.</p>

<p>References <a class="el" href="switch_8c-source.html#l00680">__switch_finalize()</a>, <a class="el" href="logger_8h-source.html#l00019">DEBUG_LOG</a>, <a class="el" href="litm_8h-source.html#l00300">_litm_connection::id</a>, <a class="el" href="litm_8h-source.html#l00335">LITM_CODE_ERROR_BAD_CONNECTION</a>, <a class="el" href="litm_8h-source.html#l00343">LITM_CODE_ERROR_INVALID_ENVELOPE</a>, <a class="el" href="litm_8h-source.html#l00333">LITM_CODE_ERROR_MALLOC</a>, <a class="el" href="litm_8h-source.html#l00330">LITM_CODE_OK</a>, <a class="el" href="queue_8c-source.html#l00119">queue_put()</a>, <a class="el" href="queue_8c-source.html#l00477">queue_signal()</a>, <a class="el" href="litm_8h-source.html#l00298">_litm_connection::released</a>, <a class="el" href="litm_8h-source.html#l00381">_litm_envelope::released_count</a>, and <a class="el" href="litm_8h-source.html#l00384">_litm_envelope::routes</a>.</p>

<p>Referenced by <a class="el" href="litm_8c-source.html#l00258">litm_release()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="switch_8h_2bab91639e612d51d0d7d8a3a64d0ace_cgraph.png" border="0" usemap="#switch_8h_2bab91639e612d51d0d7d8a3a64d0ace_cgraph_map" alt=""></center>
<map name="switch_8h_2bab91639e612d51d0d7d8a3a64d0ace_cgraph_map">
<area shape="rect" href="switch_8c.html#149e07f06e61c0daee8f4cf38200dff2" title="__switch_finalize" alt="" coords="163,5,283,32"><area shape="rect" href="queue_8c.html#e8939dc8316290db7846b56d38c7ff90" title="queue_put" alt="" coords="183,56,263,83"><area shape="rect" href="queue_8c.html#a1c32f105f2a17f2255cbe6dfaf66f78" title="queue_signal" alt="" coords="175,107,271,133"><area shape="rect" href="pool_8c.html#1266647a6ed7c20e9c5d08f4bef09dd3" title="__litm_pool_recycle" alt="" coords="331,5,467,32"><area shape="rect" href="pool_8c.html#2f844d6f6d2a471a5a93c3c49c28eef2" title="__litm_pool_destroy" alt="" coords="516,5,652,32"><area shape="rect" href="queue_8c.html#24e3c9aaef201f1f66bcd8591b1e4c15" title="queue_put_safe" alt="" coords="343,56,455,83"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="switch_8h_2bab91639e612d51d0d7d8a3a64d0ace_icgraph.png" border="0" usemap="#switch_8h_2bab91639e612d51d0d7d8a3a64d0ace_icgraph_map" alt=""></center>
<map name="switch_8h_2bab91639e612d51d0d7d8a3a64d0ace_icgraph_map">
<area shape="rect" href="litm_8h.html#21def412c9b064fc929e0822f28d2a2a" title="litm_release" alt="" coords="164,5,255,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="a12d12ec55e370e7b2d960a67ab19078"></a><!-- doxytag: member="switch.h::switch_remove_subscriber" ref="a12d12ec55e370e7b2d960a67ab19078" args="(litm_connection *conn, litm_bus bus_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="litm_8h.html#a1c70492a41df506aa1156ea7d36c4de">litm_code</a> switch_remove_subscriber           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__litm__connection.html">litm_connection</a> *&nbsp;</td>
          <td class="paramname"> <em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="litm_8h.html#e7fcc1b5cd037f318d4fe40a2f9d30d3">litm_bus</a>&nbsp;</td>
          <td class="paramname"> <em>bus_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="switch_8c-source.html#l00516">516</a> of file <a class="el" href="switch_8c-source.html">switch.c</a>.</p>

<p>References <a class="el" href="connection_8c-source.html#l00246">_litm_connections_trylock()</a>, <a class="el" href="connection_8c-source.html#l00253">_litm_connections_unlock()</a>, <a class="el" href="switch_8c-source.html#l00043">_subscribers_mutex</a>, <a class="el" href="litm_8h-source.html#l00227">LITM_BUSSES_MAX</a>, <a class="el" href="litm_8h-source.html#l00332">LITM_CODE_BUSY</a>, <a class="el" href="litm_8h-source.html#l00335">LITM_CODE_ERROR_BAD_CONNECTION</a>, <a class="el" href="litm_8h-source.html#l00337">LITM_CODE_ERROR_INVALID_BUS</a>, <a class="el" href="litm_8h-source.html#l00344">LITM_CODE_ERROR_SUBSCRIPTION_NOT_FOUND</a>, <a class="el" href="litm_8h-source.html#l00330">LITM_CODE_OK</a>, and <a class="el" href="litm_8h-source.html#l00226">LITM_CONNECTION_MAX</a>.</p>

<p>Referenced by <a class="el" href="litm_8c-source.html#l00089">litm_unsubscribe()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="switch_8h_a12d12ec55e370e7b2d960a67ab19078_cgraph.png" border="0" usemap="#switch_8h_a12d12ec55e370e7b2d960a67ab19078_cgraph_map" alt=""></center>
<map name="switch_8h_a12d12ec55e370e7b2d960a67ab19078_cgraph_map">
<area shape="rect" href="connection_8c.html#6b2986abb5453019ea29678d1d75383f" title="_litm_connections_trylock" alt="" coords="231,5,401,32"><area shape="rect" href="connection_8c.html#c75b4b0413d3523574bda13549715447" title="_litm_connections_unlock" alt="" coords="231,56,401,83"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="switch_8h_a12d12ec55e370e7b2d960a67ab19078_icgraph.png" border="0" usemap="#switch_8h_a12d12ec55e370e7b2d960a67ab19078_icgraph_map" alt=""></center>
<map name="switch_8h_a12d12ec55e370e7b2d960a67ab19078_icgraph_map">
<area shape="rect" href="litm_8h.html#50225024a2292b63a5eb95cca00f2545" title="litm_unsubscribe" alt="" coords="229,5,349,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="53fa28981b2f79292ea1d0c2d5c50aec"></a><!-- doxytag: member="switch.h::switch_send" ref="53fa28981b2f79292ea1d0c2d5c50aec" args="(litm_connection *conn, litm_bus bus_id, void *msg, void(*cleaner)(void *msg), int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="litm_8h.html#a1c70492a41df506aa1156ea7d36c4de">litm_code</a> switch_send           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__litm__connection.html">litm_connection</a> *&nbsp;</td>
          <td class="paramname"> <em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="litm_8h.html#e7fcc1b5cd037f318d4fe40a2f9d30d3">litm_bus</a>&nbsp;</td>
          <td class="paramname"> <em>bus_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *msg)&nbsp;</td>
          <td class="paramname"> <em>cleaner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function just queues up the message in the switch's input_queue without actually sending it to recipients.<p>
This function blocks whilst accessing the switch's ``input_queue`` but no deadlock scenario is possible since the switch's thread does not block whilst dequeuing. 
<p>Definition at line <a class="el" href="switch_8c-source.html#l00568">568</a> of file <a class="el" href="switch_8c-source.html">switch.c</a>.</p>

<p>References <a class="el" href="switch_8c-source.html#l00584">__switch_safe_send()</a>, <a class="el" href="litm_8h-source.html#l00227">LITM_BUSSES_MAX</a>, <a class="el" href="litm_8h-source.html#l00335">LITM_CODE_ERROR_BAD_CONNECTION</a>, and <a class="el" href="litm_8h-source.html#l00337">LITM_CODE_ERROR_INVALID_BUS</a>.</p>

<p>Referenced by <a class="el" href="litm_8c-source.html#l00095">litm_send()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="switch_8h_53fa28981b2f79292ea1d0c2d5c50aec_cgraph.png" border="0" usemap="#switch_8h_53fa28981b2f79292ea1d0c2d5c50aec_cgraph_map" alt=""></center>
<map name="switch_8h_53fa28981b2f79292ea1d0c2d5c50aec_cgraph_map">
<area shape="rect" href="switch_8c.html#2e20f13c81cddbb6b22dbf8ae111a96d" title="__switch_safe_send" alt="" coords="148,81,287,108"><area shape="rect" href="pool_8c.html#5a3eeccda0cfcf633af7177fad20c783" title="__litm_pool_get" alt="" coords="348,5,460,32"><area shape="rect" href="pool_8c.html#1266647a6ed7c20e9c5d08f4bef09dd3" title="__litm_pool_recycle" alt="" coords="336,56,472,83"><area shape="rect" href="queue_8c.html#e8939dc8316290db7846b56d38c7ff90" title="queue_put" alt="" coords="364,107,444,133"><area shape="rect" href="queue_8c.html#8ef73c0a37ef99ebc486eaa88bd19cef" title="queue_put_head" alt="" coords="347,157,461,184"><area shape="rect" href="pool_8c.html#ad0b7166470e29cb5024efeca7d035af" title="__litm_pool_clean" alt="" coords="532,5,657,32"><area shape="rect" href="pool_8c.html#2f844d6f6d2a471a5a93c3c49c28eef2" title="__litm_pool_destroy" alt="" coords="527,56,663,83"><area shape="rect" href="queue_8c.html#24e3c9aaef201f1f66bcd8591b1e4c15" title="queue_put_safe" alt="" coords="539,107,651,133"><area shape="rect" href="queue_8c.html#145cb346a7b7660c1fdf011298d6ff5d" title="queue_put_head_safe" alt="" coords="521,157,668,184"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="switch_8h_53fa28981b2f79292ea1d0c2d5c50aec_icgraph.png" border="0" usemap="#switch_8h_53fa28981b2f79292ea1d0c2d5c50aec_icgraph_map" alt=""></center>
<map name="switch_8h_53fa28981b2f79292ea1d0c2d5c50aec_icgraph_map">
<area shape="rect" href="litm_8h.html#ec1432d7f0252d45801739101e04e050" title="litm_send" alt="" coords="147,5,224,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="e3d353fd292b45761954aa21d793017d"></a><!-- doxytag: member="switch.h::switch_thread_function" ref="e3d353fd292b45761954aa21d793017d" args="(void *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* switch_thread_function           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>params</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu May 28 12:27:27 2009 for LITM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
